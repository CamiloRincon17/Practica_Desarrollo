<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>¬°Feliz Cumplea√±os!</title>
  <style>
    :root {
      --bg:#fdeff2;
      --accent:#d63384;
    }
    * { box-sizing:border-box }
    body {
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;
      background:linear-gradient(180deg,#fff8fb,var(--bg));
      padding:28px;
    }
    .wrap {
      width:min(680px,96vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:24px;
    }
    h1 {
      margin:0 0 10px 0;
      color:#3b1840;
      font-size:1.8rem;
    }
    p.lead {
      margin:0 0 18px;
      color:#d725a7;
      text-align:center;
    }
    .scene {
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:420px;
      position:relative;
    }
    .gift-wrap {
      width:260px;
      height:220px;
      position:relative;
      transform-style:preserve-3d;
      transition:transform .9s cubic-bezier(.2,.9,.25,1);
    }
    .box {
      position:absolute;
      left:0; top:40px;
      width:100%; height:100%;
      background:linear-gradient(180deg,#ffdde8,#ffb6d5);
      border-radius:12px 12px 10px 10px;
      box-shadow:0 18px 40px rgba(120,40,80,0.12);
      overflow:hidden;
    }
    .lid {
      position:absolute;
      left:0; top:0;
      width:100%; height:64px;
      background:linear-gradient(180deg,#ff4da6,#d63384);
      border-radius:12px 12px 0 0;
      transform-origin:50% 100%;
      transition:transform .9s cubic-bezier(.2,.9,.25,1);
      box-shadow:0 10px 28px rgba(214,51,132,0.18);
    }
    .ribbon-vert {
      position:absolute;
      left:50%; top:0;
      transform:translateX(-50%);
      width:36px; height:100%;
      background:linear-gradient(180deg,#ffdde8,#ff9ccf);
    }
    .ribbon-h {
      position:absolute;
      left:0; top:50%;
      transform:translateY(-50%);
      width:100%; height:26px;
      background:linear-gradient(90deg,#ff8fc4,#ff4da6);
    }
    .bow {
      position:absolute;
      left:50%; top:10px;
      transform:translateX(-50%);
      width:74px; height:44px;
      border-radius:36px;
      background:radial-gradient(circle at 25% 25%,#fff4fb,#ff67a6);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:800;
      color:white;
      box-shadow:0 6px 18px rgba(200,50,110,0.12);
      animation: bounce 1.2s infinite alternate;
    }
    @keyframes bounce {
      to { transform: translateX(-50%) scale(1.15); }
    }
    .card-inside {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(0.7);
      opacity: 0;
      transition: all 0.7s cubic-bezier(.2,.9,.25,1);
      background: #fff8fb;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(214,51,132,0.12);
      padding: 24px 18px;
      text-align: center;
      z-index: 10;
    }
    .card-inside.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    .card-inside h2 {
      margin: 0;
      color: #d63384;
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: 1px;
    }
    .shadow {
      position: absolute;
      left: 50%;
      top: 100%;
      width: 120px;
      height: 28px;
      background: radial-gradient(ellipse at center, #d63384 18%, #fff8fb 100%);
      opacity: 0.18;
      transform: translateX(-50%);
      border-radius: 50%;
      z-index: 0;
    }
    canvas.confetti {
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 99;
    }
    .btn {
      font-size: 1.2rem;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px rgba(214,51,132,0.12);
      transition: transform 0.2s;
      background: linear-gradient(90deg,#ff7bbf,var(--accent));
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 12px 32px;
      cursor: pointer;
    }
    .btn:hover {
      transform: scale(1.08);
      background:linear-gradient(90deg,#ff7bbf,#d63384);
    }
    .balloons {
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 98;
    }
    .balloon {
      position: absolute;
      bottom: -80px;
      width: 44px;
      height: 62px;
      border-radius: 50% 50% 48% 48%;
      box-shadow: 0 4px 12px rgba(255, 111, 168, 0.18);
      animation: floatUp 8s linear infinite;
    }
    .balloon::after {
      content: '';
      position: absolute;
      left: 50%; bottom: -18px;
      width: 2px; height: 22px;
      background: #666;
      transform: translateX(-50%);
      border-radius: 2px;
    }
    @keyframes floatUp {
      0% { transform: translateY(0);}
      100% { transform: translateY(-110vh);}
    }
    .video-container {
      display: none;
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      background: rgba(255,255,255,0.98);
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(120,40,80,0.18);
      padding: 0;
      text-align: center;
    }
    .video-container iframe {
      width: 560px;
      height: 315px;
      max-width: 98vw;
      max-height: 98vh;
      border-radius: 14px;
      border: none;
      background: #000;
    }
    .stars-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }
    .star {
      position: absolute;
      width: 18px;
      height: 18px;
      background: radial-gradient(circle, #fff7fa 60%, #ffb6d5 100%);
      border-radius: 50%;
      opacity: 0.7;
      animation: twinkle 2s infinite alternate;
    }
    .star:nth-child(1) { top: 10%; left: 8%; animation-delay: 0.2s;}
    .star:nth-child(2) { top: 20%; left: 80%; animation-delay: 0.5s;}
    .star:nth-child(3) { top: 35%; left: 60%; animation-delay: 1.2s;}
    .star:nth-child(4) { top: 60%; left: 15%; animation-delay: 0.8s;}
    .star:nth-child(5) { top: 75%; left: 70%; animation-delay: 1.5s;}
    .star:nth-child(6) { top: 85%; left: 30%; animation-delay: 0.3s;}
    .star:nth-child(7) { top: 50%; left: 50%; animation-delay: 1.8s;}
    .star:nth-child(8) { top: 15%; left: 55%; animation-delay: 0.7s;}
    .star:nth-child(9) { top: 80%; left: 85%; animation-delay: 1.1s;}
    .star:nth-child(10){ top: 40%; left: 25%; animation-delay: 1.3s;}
    @keyframes twinkle {
      to { opacity: 1; transform: scale(1.3);}
    }
    .decor-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
    }
    .decor-balloon {
      position: absolute;
      bottom: -100px;
      width: 48px;
      height: 68px;
      background: radial-gradient(circle at 30% 30%, #fff, #ff6fa8 80%);
      border-radius: 50% 50% 48% 48%;
      box-shadow: 0 4px 12px rgba(255, 111, 168, 0.18);
      animation: floatUp 8s linear infinite;
    }
    .decor-balloon::after {
      content: '';
      position: absolute;
      left: 50%; bottom: -18px;
      width: 2px; height: 22px;
      background: #666;
      transform: translateX(-50%);
      border-radius: 2px;
    }
    .decor-flower {
      position: absolute;
      bottom: 40px;
      width: 38px;
      height: 38px;
      background: radial-gradient(circle, #ffe6f7 60%, #ffb6d5 100%);
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(255,182,213,0.18);
      animation: floatFlower 7s ease-in-out infinite;
    }
    .decor-flower::before, .decor-flower::after {
      content: '';
      position: absolute;
      width: 18px; height: 18px;
      background: #ffb6d5;
      border-radius: 50%;
    }
    .decor-flower::before {
      left: -10px; top: 10px;
    }
    .decor-flower::after {
      right: -10px; top: 10px;
    }
    .decor-heart {
      position: absolute;
      bottom: 80px;
      width: 32px;
      height: 32px;
      background: #ff67a6;
      border-radius: 50% 50% 40% 40% / 60% 60% 100% 100%;
      transform: rotate(-45deg);
      box-shadow: 0 2px 8px rgba(255,103,166,0.18);
      animation: floatHeart 6s ease-in-out infinite;
    }
    .decor-heart::before, .decor-heart::after {
      content: '';
      position: absolute;
      width: 32px; height: 32px;
      background: #ff67a6;
      border-radius: 50%;
    }
    .decor-heart::before {
      top: -16px; left: 0;
    }
    .decor-heart::after {
      left: 16px; top: 0;
    }
    @keyframes floatFlower {
      0% { transform: translateY(0) scale(1);}
      50% { transform: translateY(-40px) scale(1.08);}
      100% { transform: translateY(0) scale(1);}
    }
    @keyframes floatHeart {
      0% { transform: translateY(0) scale(1);}
      50% { transform: translateY(-30px) scale(1.12);}
      100% { transform: translateY(0) scale(1);}
    }
    @media(max-width:680px){
      .wrap { width:98vw; }
      .scene { min-height:320px;}
      .gift-wrap { width:180px; height:140px;}
      .box { top:24px;}
      .video-container { width: 90vw; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <p class="lead" id="happy">¬°Feliz cumplea√±os!  üéÅ</p>
    <div class="scene" id="scene">
      <div class="gift-wrap" id="gift">
        <div class="lid" id="lid"></div>
        <div class="box">
          <div class="ribbon-vert"></div>
          <div class="ribbon-h"></div>
          <div class="bow">üéÄ</div>
          <div class="card-inside" id="cardInside">
            <h2 id="insideText">¬°Feliz cumplea√±os, Ceilin! üéâ</h2>
          </div>
          <div class="video-container" id="videoContainer">
            <iframe
              width="560"
              height="315"
              src="https://www.youtube.com/embed/UBX8RjL_c3k?rel=0&controls=1"
              title="YouTube video player"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen
              style="border-radius:14px;box-shadow:0 4px 16px rgba(214,51,132,0.18);background:#000;">
            </iframe>
          </div>
        </div>
      </div>
      <div class="shadow" aria-hidden="true"></div>
      <canvas class="confetti" id="confetti"></canvas>
      <div class="balloons" id="balloons"></div>
    </div>
    <button class="btn" id="openBtn">Abrir regalo</button>
  </div>
  <div class="stars-bg">
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
    <div class="star"></div>
  </div>
  <div class="decor-bg">
    <!-- Globos -->
    <div class="decor-balloon" style="left:10%; animation-delay:0s;"></div>
    <div class="decor-balloon" style="left:30%; animation-delay:1s;"></div>
    <div class="decor-balloon" style="left:60%; animation-delay:2s;"></div>
    <div class="decor-balloon" style="left:80%; animation-delay:0.5s;"></div>
    <!-- Flores -->
    <div class="decor-flower" style="left:15%; animation-delay:0.7s;"></div>
    <div class="decor-flower" style="left:50%; animation-delay:1.3s;"></div>
    <div class="decor-flower" style="left:75%; animation-delay:2.1s;"></div>
    <!-- Corazones -->
    <div class="decor-heart" style="left:25%; animation-delay:0.9s;"></div>
    <div class="decor-heart" style="left:70%; animation-delay:1.7s;"></div>
  </div>
  <script>
    const openBtn = document.getElementById('openBtn');
    const lid = document.getElementById('lid');
    const gift = document.getElementById('gift');
    const cardInside = document.getElementById('cardInside');
    const insideText = document.getElementById('insideText');
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    const videoContainer = document.getElementById('videoContainer');
    const birthdayVideo = document.getElementById('birthdayVideo');

    function resizeCanvas(){
      canvas.width = innerWidth * devicePixelRatio;
      canvas.height = innerHeight * devicePixelRatio;
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const particles = [];
    function spawn(x,y,spread,count){
      for(let i=0;i<count;i++){
        const angle = (Math.random()-0.5)*spread + -Math.PI/2;
        const speed = Math.random()*6 + 2;
        particles.push({
          x:x, y:y,
          vx:Math.cos(angle)*speed,
          vy:Math.sin(angle)*speed,
          sz:Math.random()*8+4,
          color:`hsl(${Math.floor(Math.random()*360)},85%,60%)`,
          rot:Math.random()*360,
          life:Math.random()*90+60
        });
      }
    }

    function update(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.vy += 0.18;
        p.x += p.vx; p.y += p.vy; p.rot += p.vx*0.1; p.life--;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot*Math.PI/180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.sz/2, -p.sz/2, p.sz, p.sz*0.6);
        ctx.restore();
        if(p.y > innerHeight + 100 || p.life<=0) particles.splice(i,1);
      }
      requestAnimationFrame(update);
    }
    update();

    function boxCenter(){
      const rect = gift.getBoundingClientRect();
      return {x: rect.left + rect.width/2, y: rect.top + rect.height/3};
    }

    let opened = false;
    function openGift(){
      if(opened) return;
      opened = true;
      lid.style.transform = 'rotateX(-75deg) translateZ(18px)';
      gift.style.transform = 'translateY(-10px) scale(1.02)';
      setTimeout(()=>{ 
        cardInside.classList.add('show'); 
        // Mostrar el texto primero
        setTimeout(()=>{
          // Oculta la l√≠nea del regalo
          document.querySelector('.lid').style.display = 'none';
          // Muestra el video
          videoContainer.style.display = 'block';
          birthdayVideo.play();
        }, 3000); // Espera 3 segundos antes de mostrar el video
      }, 420);

      const center = boxCenter();
      spawn(center.x, center.y, Math.PI*1.6, 160);
      const rainInterval = setInterval(()=>{
        const cx = center.x + (Math.random()-0.5)*220;
        spawn(cx, center.y - 40, Math.PI*1.6, 18);
      }, 160);
      setTimeout(()=>{ clearInterval(rainInterval); }, 2400);
      releaseBalloons();
    }
  
    openBtn.addEventListener('click', openGift);
    gift.addEventListener('click', openGift);

    function releaseBalloons(){
      const container = document.getElementById('balloons');
      for(let i=0;i<6;i++){
        const b = document.createElement('div');
        b.className='balloon';
        b.style.left = Math.random()*90 + 'vw';
        b.style.background = `radial-gradient(circle at 30% 30%, #fff, hsl(${Math.random()*360},70%,60%))`;
        b.style.animationDuration = (6+Math.random()*4)+'s';
        container.appendChild(b);
        setTimeout(()=>b.remove(),10000);
      }
    }
    document.querySelector('.lid').style.display = 'none';
    // o
    document.querySelector('.bow').style.display = 'none';
  </script>
</body>
</html>